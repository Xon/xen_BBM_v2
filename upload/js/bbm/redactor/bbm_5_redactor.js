!function(n,t,i,r){XenForo.BbmCustomEditor=function(n){this.__construct(n)},XenForo.BbmCustomEditor.prototype={__construct:function(t){var i=t.data("options"),u,f,e,o;if(typeof i===r)return!1;u=i.bbmButtonConfig||!1,f=this,n.extend(this,{$textarea:t,redactorOptions:i,bbmConfig:u,bbmButtons:i.buttons}),u!==!1&&(e=[],n.each(u,function(n,t){t=f.filterGroup(t),t&&e.push(t)}),o={editorOptions:{buttons:e}},n.extend(!0,i,o)),setTimeout(function(n){f.postHook(n)},0)},filterGroup:function(n){return n},postHook:function(){var i=this;if(this.redactor=this.$textarea.data("redactor"),typeof this.redactor===r)return!1;this.customButtons=this.redactor.opts.buttonsCustom,typeof i.bbmButtons!==r&&i.bbmButtons!=null&&n.each(i.bbmButtons,function(n,t){var s,u,o,c;if(typeof i.customButtons[n]!==r&&(s=i.customButtons[n],typeof t.tag!==r&&typeof t.bbCodeContent!==r)){var h=t.tag,e=t.bbCodeContent,f=t.bbCodeOptions,l=t.bbCodeOptionsSeparator;(e||f)&&(u="["+h,o="[/"+h+"]",u+=f?"="+f+"]":"]",c=u+e+o,s.callback=function(n){if(f&&!e){var t=XenForo.BbCodeWysiwygEditor.prototype;if(typeof t.wrapSelectionInHtml!==r){t.wrapSelectionInHtml(n,u,o,!0);return}}n.execCommand("inserthtml",c)})}}),typeof BBM_Redactor_EXTEND!==r&&n.each(BBM_Redactor_EXTEND,function(n,t){typeof t=="function"&&t(i)})}},XenForo.register("textarea.BbCodeWysiwygEditor","XenForo.BbmCustomEditor")}(jQuery,this,document,"undefined");