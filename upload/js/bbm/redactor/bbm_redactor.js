!function(n,t,i,r){XenForo.BbmCustomEditor=function(n){this.__construct(n)},XenForo.BbmCustomEditor.prototype={__construct:function(t){var i=t.data("options"),u=i.bbmButtonConfig||!1,e=this,r,f;n.extend(this,{$textarea:t,redactorOptions:i,bbmConfig:u,bbmButtons:i.buttons}),u!==!1&&(r=[],n.each(u,function(n,t){t=e.filterGroup(t),t&&r.push(t)}),f={editorOptions:{buttons:r}},n.extend(!0,i,f)),setTimeout(function(n){e.postHook(n)},0)},filterGroup:function(n){return n},postHook:function(){var i=this;if(this.redactor=this.$textarea.data("redactor"),this.customButtons=this.redactor.opts.buttonsCustom,typeof this.redactor===r)return!1;n.each(i.bbmButtons,function(n,t){var s,u,e,h;if(typeof i.customButtons[n]!==r&&(s=i.customButtons[n],typeof t.tag!==r&&typeof t.bbCodeContent!==r)){var c=t.tag,o=t.bbCodeContent,f=t.bbCodeOptions,l=t.bbCodeOptionsSeparator;(o||f)&&(u="["+c,e="[/"+c+"]",u+=f?"="+f+"]":"]",h=u+o+e,s.callback=function(n){if(f&&!o){var t=XenForo.BbCodeWysiwygEditor.prototype;if(typeof t.wrapSelectionInHtml!==r){t.wrapSelectionInHtml(n,u,e,!0);return}}n.execCommand("inserthtml",h)})}}),typeof BBM_Redactor_EXTEND!==r&&n.each(BBM_Redactor_EXTEND,function(n,t){typeof t=="function"&&t(i)})}},XenForo.register("textarea.BbCodeWysiwygEditor","XenForo.BbmCustomEditor")}(jQuery,this,document,"undefined");